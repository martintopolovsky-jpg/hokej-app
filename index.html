<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="p-3">

<h2 class="mb-3">Hokej - dochádzka</h2>

<h4>Obrancovia</h4>
<ul class="list-group mb-4">
    {% for p in players if p.position == "obranca" %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ p.name }}
        <input type="checkbox" class="form-check-input"
               onchange="toggleConfirm({{p.id}}, this.checked)"
               {% if p.confirmed %}checked{% endif %}>
    </li>
    {% endfor %}
</ul>

<h4>Útočníci</h4>
<ul class="list-group mb-4">
    {% for p in players if p.position == "utocnik" %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ p.name }}
        <input type="checkbox" class="form-check-input"
               onchange="toggleConfirm({{p.id}}, this.checked)"
               {% if p.confirmed %}checked{% endif %}>
    </li>
    {% endfor %}
</ul>

<form action="/add_player" method="POST" class="mb-3">
    <input name="name" placeholder="Meno" class="form-control mb-2">
    <select name="position" class="form-select mb-2">
        <option value="obranca">Obranca</option>
        <option value="utocnik">Útočník</option>
    </select>
    <button class="btn btn-primary w-100">Pridať hráča</button>
</form>

<a href="/reset" class="btn btn-danger w-100">Reset na nový týždeň</a>

<script>
function toggleConfirm(id, state) {
    fetch("/confirm", {
        method: "POST",
        headers: {"Content-Type": "application/x-www-form-urlencoded"},
        body: "id=" + id + "&confirmed=" + (state ? 1 : 0)
    });
}
</script>

</body>
</html>
